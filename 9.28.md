# 梯度向量与等高线切向量正交的严格证明

## 1. 推导过程

### 1.1 梯度向量定义

对于函数 $E(w_1, w_2)$，其梯度向量定义为：

$$\nabla E(w_1, w_2) = \left( \frac{\partial E}{\partial w_1}, \frac{\partial E}{\partial w_2} \right)$$

### 1.2 等高线切向量的推导

等高线是满足 $E(w_1, w_2) = c$（常数）的点集。设 $w_2 = f(w_1)$ 是等高线的隐函数表示，则有：

$$E(w_1, f(w_1)) = c$$

对两边关于 $w_1$ 求导（使用链式法则）：

$$\frac{\partial E}{\partial w_1} + \frac{\partial E}{\partial w_2} \cdot \frac{df}{dw_1} = 0$$

整理得：

$$\frac{df}{dw_1} = -\frac{\frac{\partial E}{\partial w_1}}{\frac{\partial E}{\partial w_2}}$$

因此，等高线在点 $(w_1, w_2)$ 处的切向量可以取为：

$$\vec{t} = \left( 1, \frac{df}{dw_1} \right) = \left( 1, -\frac{\frac{\partial E}{\partial w_1}}{\frac{\partial E}{\partial w_2}} \right)$$

### 1.3 正交性证明

计算梯度向量 $\nabla E$ 与切向量 $\vec{t}$ 的点积：

$$\nabla E \cdot \vec{t} = \frac{\partial E}{\partial w_1} \cdot 1 + \frac{\partial E}{\partial w_2} \cdot \left( -\frac{\frac{\partial E}{\partial w_1}}{\frac{\partial E}{\partial w_2}} \right)$$

$$= \frac{\partial E}{\partial w_1} - \frac{\partial E}{\partial w_1} = 0$$

因此，梯度向量与等高线切向量正交。

## 2. 直观几何解释

沿着等高线行走时，函数值保持不变。这意味着在等高线的切线方向上，函数的变化率为零。而梯度向量指向函数值增长最快的方向。如果梯度向量与切线方向不垂直，那么沿着切线方向就会有一定的函数变化率，这与等高线的定义矛盾。因此，梯度必须垂直于等高线的切线。

类比于地形图：等高线连接海拔相同的点。沿着等高线走，海拔不变。而最陡的上坡方向（梯度）必然垂直于等高线。

## 3. 计算验证

### 3.1 具体函数示例

考虑函数：
$$E(w_1, w_2) = w_1^2 + 2w_2^2 + w_1w_2$$

#### 3.1.1 计算梯度向量

$$\frac{\partial E}{\partial w_1} = 2w_1 + w_2$$
$$\frac{\partial E}{\partial w_2} = 4w_2 + w_1$$

在点 $(1, 1)$ 处：
$$\nabla E(1, 1) = (2\cdot1 + 1, 4\cdot1 + 1) = (3, 5)$$

#### 3.1.2 求等高线切线斜率

在点 $(1, 1)$ 处，切线斜率为：
$$\frac{df}{dw_1} = -\frac{\frac{\partial E}{\partial w_1}}{\frac{\partial E}{\partial w_2}} = -\frac{3}{5}$$

切向量可取为：$\vec{t} = (1, -3/5)$ 或更简单的 $\vec{t} = (5, -3)$（缩放后）

#### 3.1.3 验证正交性

$$\nabla E \cdot \vec{t} = (3, 5) \cdot (5, -3) = 3\cdot5 + 5\cdot(-3) = 15 - 15 = 0$$

验证成功！

## 4. 可视化展示

<div align="center">
<img src="gradient_contour.png" alt="梯度与等高线示意图" width="400">
</div>

*图1：梯度向量（红色）与等高线切向量（蓝色）的正交关系*

## 结论

通过严格的数学推导和具体的数值验证，我们证明了梯度向量确实与等高线的切向量正交。这一性质在优化问题中具有重要意义，因为它指出了在等高线方向上函数值不变，而最速下降方向（负梯度方向）垂直于等高线。